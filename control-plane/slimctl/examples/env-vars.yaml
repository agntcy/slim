# Copyright AGNTCY Contributors (https://github.com/agntcy)
# SPDX-License-Identifier: Apache-2.0

# Example: Configuration with Environment Variables
# This configuration demonstrates using environment variable substitution.
#
# The SLIM bindings support ${env:VARIABLE_NAME:-default} syntax.
# All variables below have sensible defaults and work out-of-the-box.

runtime:
  n_cores: 0
  thread_name: "slim-worker"
  drain_timeout: 10s

tracing:
  log_level: info  # Override with RUST_LOG environment variable
  display_thread_names: true
  display_thread_ids: true

services:
  slim/0:
    dataplane:
      servers:
        - endpoint: "${env:SLIM_ENDPOINT:-127.0.0.1:8080}"
          tls:
            insecure: "${env:SLIM_TLS_INSECURE:-true}"
      clients: []

# Usage examples:
#
# 1. Development (default settings):
#    slimctl slim start --config examples/env-vars.yaml
#
# 2. Custom endpoint and debug logging:
#    RUST_LOG=debug slimctl slim start \
#      --config examples/env-vars.yaml \
#      --endpoint 127.0.0.1:9090
#
# 3. Override via CLI flags (recommended):
#    slimctl slim start \
#      --config examples/env-vars.yaml \
#      --endpoint 0.0.0.0:8443 \
#      --tls-cert /path/to/cert.pem \
#      --tls-key /path/to/key.pem
#
# Note: CLI flags are converted to environment variables automatically:
#   --endpoint  → SLIM_ENDPOINT
#   --insecure  → SLIM_TLS_INSECURE
#   --tls-cert  → SLIM_TLS_CERT
#   --tls-key   → SLIM_TLS_KEY
